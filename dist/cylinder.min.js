/*
 * cylinder v0.13.5 (2016-09-07 11:13:15)
 * @author Lu√≠s Soares <luis.soares@comon.pt>
 */

!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";function d(){var a=this,b=!1;this.version="0.13.5",this.initialized=function(){return b},this.dependency=function(){var a=Array.prototype.slice.call(arguments),b=!0;a.length>0&&"boolean"==typeof a[a.length-1]&&(b=!a[a.length-1],a.pop());for(var c=0;c<a.length;c++)for(var d=a[c],e="object"==typeof d,f=!e||1!=d.optional,g=e?d.scope||window:window,h=e?d.name:d,i=(""+(e?d.package:d)).split("."),j=0;j<i.length;j++){var d=i[j],k=Object.prototype.hasOwnProperty.call(g,d);if(!k){if(b&&f)throw new CylinderException('Missing dependency "'+h+'"!');return!1}g=g[d]}return!0},this.dependency("async","jQuery",{package:"_",name:"underscore.js"},{package:"s",name:"underscore.string"},"Backbone");var c=[],d={};this.$=jQuery,this._=_,this.s=s,_.extend(this._,{str:this.s}),_.extend(this,Backbone.Events),this.extend=function(d,e){return!b&&e?(_.contains(c,d)||c.push(d),a):("function"==typeof d&&(d=d(a)),arguments.length<3&&a.trigger("extend",d),_.extend(a,d),d)},this.module=function(c,e){if(!_.isString(c)||/^\s*$/.test(c))throw new CylinderException("Trying to add a nameless module!");if(_.isUndefined(e)||_.isNull(e))return b&&_.has(d,c)?a[c]:null;if(d[c]=e,!b)return a;var f={name:c},g="function"==typeof e?e(a,f):e;g||(g=f);var h={};return h[c]=g,a.extend(h,!0,!1),a.trigger("module",c,g),a.trigger("module:"+c,g),g},this.modules=function(){return _.mapObject(d,function(b,c){return a[c]})},this.init=function(e){return b?a:(b=!0,a.$(function(){_.each(d,function(b,c){a.module(c,b)}),_.each(c,function(b){a.extend(b)}),a.trigger("init",a),_.isFunction(e)&&e(a)}),a)}}b.exports=d},{}],2:[function(a,b,c){"use strict";function d(a,b){this.value=b,this.message=null!=a?a.toString():a,this.toString=function(){return this.message}}b.exports=d},{}],3:[function(a,b,c){"use strict";function d(a){return _.extend(this,{name:null,width_min:null,width_max:null,height_min:null,height_max:null,callback:null},a),this.toString=function(){return JSON.stringify(this)},this}b.exports=d},{}],4:[function(a,b,c){"use strict";b.exports=function(a){var b=!1,c={};return a.controller=function(d,e){if(!_.isString(d)||a.s.isBlank(d))throw new CylinderException("Trying to add a nameless controller!");if(_.isUndefined(e)||_.isNull(e))return b&&_.has(c,d)?c[d].instance:null;if(c[d]={constructor:e,instance:{name:d}},!b)return c[d].instance;var f=c[d].instance,g="function"==typeof e?e(a,f):e;return g||(g=f),c[d].instance=g,a.trigger("controller",d,g),a.trigger("controller:"+d,g),g},a.controllers=function(){return _.mapObject(c,function(a,b){return a.instance})},a.initControllers=function(d){return b?a:(b=!0,a.$(function(){_.each(c,function(b,c){a.controller(c,b.constructor)}),a.trigger("initcontrollers",a),_.isFunction(d)&&d(a)}),a)},a}},{}],5:[function(a,b,c){!function(b){b.CylinderClass=a("./classes/class"),b.CylinderException=a("./classes/exception"),b.CylinderResizeRule=a("./classes/resizerule"),b.CylinderClass.ExtensionControllers=a("./extensions/controllers"),b.CylinderClass.ModuleUtils=a("./modules/utils"),b.CylinderClass.ModuleDom=a("./modules/dom"),b.CylinderClass.ModuleStore=a("./modules/store"),b.CylinderClass.ModuleAnalytics=a("./modules/analytics"),b.CylinderClass.ModuleTemplates=a("./modules/templates"),b.CylinderClass.ModuleRouter=a("./modules/router"),b.CylinderClass.ModuleResize=a("./modules/resize"),b.CylinderClass.ModuleScroll=a("./modules/scroll"),b.Cylinder=b.cylinder=new CylinderClass,b.Cylinder.extend(b.CylinderClass.ExtensionControllers),b.Cylinder.module("utils",b.CylinderClass.ModuleUtils),b.Cylinder.module("dom",b.CylinderClass.ModuleDom),b.Cylinder.module("store",b.CylinderClass.ModuleStore),b.Cylinder.module("analytics",b.CylinderClass.ModuleAnalytics),b.Cylinder.module("templates",b.CylinderClass.ModuleTemplates),b.Cylinder.module("router",b.CylinderClass.ModuleRouter),b.Cylinder.module("resize",b.CylinderClass.ModuleResize),b.Cylinder.module("scroll",b.CylinderClass.ModuleScroll)}(window)},{"./classes/class":1,"./classes/exception":2,"./classes/resizerule":3,"./extensions/controllers":4,"./modules/analytics":6,"./modules/dom":7,"./modules/resize":8,"./modules/router":9,"./modules/scroll":10,"./modules/store":11,"./modules/templates":12,"./modules/utils":13}],6:[function(require,module,exports){"use strict";module.exports=function(cylinder,_module){function call_ga(args){if("undefined"==typeof ga||_.isNull(ga)||!_.isFunction(ga))return null;var s="'"+args.join("','")+"'";return module.options.debug?"ga("+s+")":eval("ga("+s+")")}function call_gaq(a){if("undefined"==typeof _gaq||_.isNull(_gaq))return null;var b="'"+a.join("','")+"'";return module.options.debug?"_gaq.push(["+b+"])":_gaq.push(a)}var module=_.extend({},_module);return module.options={debug:!1,log:!1},module.pageview=function(a){module.options.log&&!_.isUndefined(console.log)&&console.log("Pageview: "+a),call_ga(["send","pageview",a]),call_gaq(["_trackEvent",a])},module.event=function(a,b,c,d){module.options.log&&!_.isUndefined(console.log)&&console.log("Event: "+a+" "+b+" "+c+" "+d);var e=_.toArray(arguments);call_ga(_.union(["send","event"],e)),call_gaq(_.union(["_trackEvent"],e))},module}},{}],7:[function(a,b,c){"use strict";b.exports=function(a,b){var c=_.extend({},b);return a.dependency("Cylinder.utils"),c.options={title:"Cylinder"},c.$window=a.$(window),c.$document=a.$(document),c.$html=c.$document.find("html"),c.$head=c.$document.find("head"),c.$body=c.$document.find("body"),c.title=function(b,d){var e=!a.s.isBlank(b),f=(e?" - ":"")+c.options.title;d&&e&&(f=""),e||(b=""),document.title=a.s.unescapeHTML(b+f)},c.meta=function(a){if(!_.isObject(a)){if(arguments.length<2)return;a={},a[arguments[0]]=arguments[1]}_.each(a,function(a,b){var d=c.$head.find('meta[name="'+b+'"], meta[property="'+b+'"]');return d.length<1?void console.warn('CYLINDER.DOM: tried to change meta "'+b+"\" but it doesn't exist"):void d.attr("content",a)})},c}},{}],8:[function(a,b,c){"use strict";!function(a){a.viewportSize={},a.viewportSize.getHeight=function(){return b("Height")},a.viewportSize.getWidth=function(){return b("Width")};var b=function(b){var c,d,e,f=b.toLowerCase(),g=a.document,h=g.documentElement;return void 0===a["inner"+b]?c=h["client"+b]:a["inner"+b]!=h["client"+b]?(d=g.createElement("body"),d.id="vpw-test-b",d.style.cssText="overflow:scroll",e=g.createElement("div"),e.id="vpw-test-d",e.style.cssText="position:absolute;top:-1000px",e.innerHTML="<style>@media("+f+":"+h["client"+b]+"px){body#vpw-test-b div#vpw-test-d{"+f+":7px!important}}</style>",d.appendChild(e),h.insertBefore(d,g.head),c=7==e["offset"+b]?h["client"+b]:a["inner"+b],h.removeChild(d)):c=a["inner"+b],c}}(window);var d=a("../classes/resizerule");b.exports=function(a,b){function c(a,b,c){return a>=c.width_min&&(!_.isNumber(c.width_max)||a<=c.width_max)}function e(b){f.previous_width=f.width,f.previous_height=f.height,f.width=viewportSize.getWidth(),f.height=viewportSize.getHeight(),_.each(g,function(b,e){b instanceof d&&a.dom.$body.toggleClass(e,(_.isFunction(b.callback)?b.callback:c)(f.width,f.height,b))}),b&&f.trigger()}var f=_.extend({},b);a.dependency("Cylinder.dom"),f.done=!1,f.width=null,f.height=null,f.previous_width=null,f.previous_height=null;var g={"layout-xs":new d({width_min:0,width_max:543}),"layout-sm":new d({width_min:544,width_max:767}),"layout-md":new d({width_min:768,width_max:991}),"layout-lg":new d({width_min:992,width_max:1199}),"layout-xl":new d({width_min:1200})};return f.addRule=function(b,e){if(!(e instanceof d))throw new CylinderException("Trying to add something that is not a CylinderResizeRule to the resize module!");g[b]=e,null!==f.width&&null!==f.height&&a.dom.$body.toggleClass(b,(_.isFunction(e.callback)?e.callback:c)(f.width,f.height,e))},f.removeRule=function(a){delete g[a]},f.rules=function(){return g},f.trigger=function(){a.trigger("resize",f.width,f.height),f.done=!0},a.dom.$window.on("resize",function(a){e(!0)}),e(!1),f}},{"../classes/resizerule":3}],9:[function(a,b,c){"use strict";b.exports=function(a,b){function c(a,b,c,d){return i.length<1?d():async.eachSeries(i,function(d,e){_.isFunction(d)?d.apply(a,[function(){e()},b.name,c]):e()},function(a){return d()})}function d(a,b,c,d){return b.middleware.length<1?d():async.eachSeries(b.middleware,function(b,d){_.isFunction(b)?b.apply(a,[function(){d()}].concat(c)):d()},function(a){return d()})}function e(b,e,i){var j=h[i],k=this;return e=_.initial(e),c(k,j,e,function(){return g.previous_route=g.route,g.route=i,g.previous_args=g.args,g.args=e,g.previous_url=g.url,g.url=f(),g.previous_route&&(g.previous_route!==g.route&&(a.trigger("routeout:"+g.previous_route,g.previous_args),a.trigger("routeout",g.previous_route,g.previous_args)),a.trigger("routechange:"+g.previous_route+":"+i,g.previous_args,e),a.trigger("routechange:"+g.previous_route,g.previous_args,i,e),a.trigger("routechange",g.previous_route,g.previous_args,i,e)),a.trigger("route:"+i,e),a.trigger("route",i,e),g.done=!0,d(k,j,e,function(){b&&b.apply(k,e)})})}function f(){return g.options.push?Backbone.history.location.pathname.replace(k,""):Backbone.history.location.hash.replace("!","").replace("#","")}var g=_.extend({},b);g.options={push:!1,clicks:!0,prefix:"",selector:"a:not([data-bypass])",navigate_defaults:{trigger:!0}},g.done=!1,g.url=null,g.route=null,g.args=null,g.previous_url=null,g.previous_route=null,g.previous_args=null;var h={},i=[],j="",k="",l="",m=new(Backbone.Router.extend({execute:e})),n=null;return g.reload=function(a){return n=clearTimeout(n),_.isNumber(a)&&a>0?n=setTimeout(function(){g.reload()},a):window.location.reload()},g.setup=function(b,c){if(_.isString(b)||(b=j),_.isString(c)||(c=k),!a.s.isBlank(b)){var d=b.replace("//","||").indexOf("/");if(d<b.length){var e=b.slice(d+1);b=b.replace(e,""),c=e+c}}return j=(a.s.isBlank(b)?location.protocol+"//"+location.host:a.s.trim(b,"/"))+"/",k=(a.s.isBlank(c)?"":"/"+a.s.trim(c,"/")).replace(j,"")+"/",l=a.s.rtrim(j,"/")+"/"+a.s.ltrim(k,"/"),Backbone.History.started&&g.start(!0),g},g.domain=function(){return j},g.root=function(){return k},g.path=function(){return l},g.start=function(a){return g.stop(),Backbone.history.start({pushState:g.options.push,root:k,silent:a||!1}),g},g.stop=function(){return Backbone.History.started&&Backbone.history.stop(),g},g.go=function(a,b,c){if(b=b||{},!_.isString(a)){var d=g.args.concat([null]),f=h[g.route];return null!==f&&e.apply(m,[f.callback,d,g.route]),g}return Backbone.History.started?(m.navigate((c!==!1?g.options.prefix:"")+a,_.extend({},g.options.navigate_defaults,b)),g):(g.options.push?window.location=l+a:window.location.hash="#"+a,g)},g.add=function(){var b=_.flatten(arguments),c=!(!_.isString(b[0])||a.s.isBlank(b[0]))&&b[0],d=_.isString(b[1])&&!a.s.isBlank(b[1])?b[1]:b[0];if(a.s.isBlank(d))throw new CylinderException("Trying to add a handler to router but no valid syntax provided.");c=a.s.slugify(c);var e=g.options.prefix||"";!a.s.isBlank(e)&&a.s.endsWith(e,"/")&&(a.s.startsWith(d,"/")||a.s.startsWith(d,"(/)"))&&(e=e.slice(0,e.length-1));var f=_.filter(arguments,_.isFunction),i=_.last(f),j=_.initial(f),k={name:c,syntax:d,callback:i,middleware:j};return h[c]=k,m.route(e+d,c,i)},g.use=function(a){return i.push(a),g},g.unuse=function(a){return i=_.without(i,a),g},g.addHandler=function(b){var c=_.last(_.flatten(arguments));return _.isFunction(c)||(c=null),a.dom.$document.on("click.clrouter",_.isString(b)&&!a.s.isBlank(b)?b:g.options.selector,function(b){if(g.options.clicks){var d=a.$(this),e={attr:d.attr("href"),prop:d.prop("href"),target:d.prop("target")};if(a.s.isBlank(e.target)||"_self"==e.target)return"#"==e.attr&&g.options.push?b.preventDefault():void(e.prop&&e.prop.slice(0,l.length)===l&&e.prop.indexOf(g.options.prefix)!==-1&&(b.preventDefault(),g.go(e.prop.replace(l,"")),_.isFunction(c)&&c(d,e)))}}),g},g.removeHandler=function(b){return a.dom.$document.off("click.clrouter",_.isString(b)&&!a.s.isBlank(b)?b:g.options.selector),g},g.setup("",a.$(location).attr("pathname")),g}},{}],10:[function(a,b,c){"use strict";b.exports=function(a,b){a.dependency("Cylinder.dom");var c=function(b,c){function d(b){return j&&null!=a.resize?a.resize.width:b.prop("clientWidth")||0}function e(b){return j&&null!=a.resize?a.resize.height:b.prop("clientHeight")||0}function f(a,b){h.previous_left=h.left,h.previous_top=h.top,h.previous_right=h.right,h.previous_bottom=h.bottom,h.left=h.$el.scrollLeft(),h.top=h.$el.scrollTop(),h.right=h.left+d(h.$el),h.bottom=h.top+e(h.$el),a&&g(b)}function g(b){h.trigger("scroll",h.$el,h.left,h.top,b),a.trigger("scroll:"+i,h.$el,h.left,h.top,b),a.trigger("scroll",h.$el,h.left,h.top,b),h.done=!0}var h=_.extend({},Backbone.Events);h.$el=b instanceof a.$&&b.length>0?b:a.dom.$window;var i=a.s.isBlank(c)?a.s.slugify(h.$el.attr("class")||h.$el.prop("nodeName")||"window"):c,j=a.$.isWindow(h.$el[0]),k=h.$el.is(a.dom.$html),l=h.$el.is(a.dom.$body);return h.done=!1,h.left=0,h.top=0,h.right=0,h.bottom=0,h.previous_left=0,h.previous_top=0,h.previous_right=0,h.previous_bottom=0,h.go=function(b,c,d){if(b instanceof jQuery){var e=b;if(0==e.length||!a.$.contains((j||k?a.dom.$body:h.$el)[0],e[0]))return;d=c;var f=e.offset()||{left:0,top:0},g=j?a.dom.$html:h.$el,i=g[0];b=Math.min(i.scrollWidth-g.prop("clientWidth"),f.left),c=Math.min(i.scrollHeight-g.prop("clientHeight"),f.top)}var m=b>=0,n=c>=0;if(m||n){if(a.s.isBlank(d)||!_.isNumber(d)||d<1)return m&&h.$el.scrollLeft(b),void(n&&h.$el.scrollTop(c));if($.velocity)m&&b!=h.left&&h.$el.velocity("scroll",{duration:d,offset:b,mobileHA:!1,axis:"x",queue:!1}),n&&c!=h.top&&h.$el.velocity("scroll",{duration:d,offset:c,mobileHA:!1,axis:"y",queue:!1});else{var o={};m&&(o.scrollLeft=b),n&&(o.scrollTop=c),j||k||l?(a.dom.$html.animate(o,d),a.dom.$body.animate(o,d)):h.$el.animate(o,d)}}},h.$el.off("scroll.cylinder").on("scroll.cylinder",function(a){f(!0,a)}),f(!1,null),h};return _.extend(c(a.dom.$window),{initialize:c})}},{}],11:[function(a,b,c){"use strict";b.exports=function(a,b){var c=_.extend({},b),d={},e=null,f=null;return c.Model=Backbone.Model.extend({initialize:function(){this.on("change",function(){return this.save()},this)},sync:function(){},fetch:function(){},save:function(){},destroy:function(){}}),c.use=function(a,b){var e=null;if(b instanceof Backbone.Model)e=b;else if(b.constructor===Backbone.Model.constructor)e=new b;else if(!_.isEmpty(b)){var f=c.Model.extend(b);e=new f}return d[a]=e,e},c.unuse=function(a){if(!_.has(d,a)){if(exception!==!1)throw new CylinderException("Trying to remove a non-existing or invalid model from store.");return null}if(a===f){if(exception!==!1)throw new CylinderException("Trying to remove the currently used data model from store. Switch to another model first.");return null}var b=d[a];return delete d[a],b},c.models=function(){return _.mapObject(d,function(a,b){return a})},c.with=function(a,b){if(!_.has(d,a)){if(b!==!1)throw new CylinderException("Trying to get non-existing or invalid model from store.");return null}return d[a]},c.switch=function(a){var b=c.with(a,!1);if(!b)throw new CylinderException("Trying to switch store context to non-existing or invalid model.");return c.fetch=_.bind(b.fetch,b),c.save=_.bind(b.save,b),c.destroy=_.bind(b.destroy,b),c.get=_.bind(b.get,b),c.escape=_.bind(b.escape,b),c.set=_.bind(b.set,b),c.has=_.bind(b.has,b),c.unset=_.bind(b.unset,b),c.clear=_.bind(b.clear,b),c.toJSON=_.bind(b.toJSON,b),e=b,f=a,b},c.use("localstorage",{namespace:"cylinder_data",fetch:function(){var b=this,c=a.$.Deferred();if(a.dependency("localStorage",!1)){var d=JSON.parse(localStorage.getItem(b.namespace));b.set(d),c.resolve(d)}else c.reject();return c},save:function(){var b=this,c=a.$.Deferred();if(a.dependency("localStorage",!1)){var d=b.toJSON();localStorage.removeItem(b.namespace),localStorage.setItem(b.namespace,JSON.stringify(d)),c.resolve(d)}else c.reject();return c}}),c.switch("localstorage"),c}},{}],12:[function(require,module,exports){"use strict";module.exports=function(cylinder,_module){function getElementFromVariable(a){return a instanceof cylinder.$?a:_.isString(a)&&!cylinder.s.isBlank(a)||null!=a&&(a.tagName||a.nodeName)?cylinder.$(a):null}function detachAllChildrenFromElement(a){module.options.detach?a.children().detach():a.empty()}var module=_.extend({},_module);cylinder.dependency("Mustache");var add_counter=0,replace_counter=0,cache_templates={},cache_partials={},cache_replaced={},load_jobs={},load_errored={};if(module.options={load:!1,load_cache:!1,load_base_path:"tpl/",load_extension:".mustache",fire_events:!0,detach:!1,partials:!0,premades:"JST"},module.defaults={},module.has=function(a){return _.has(cache_templates,a)},module.add=function(a,b,c,d){var e={id:a||"temp"+add_counter,defaults:_.isObject(c)?c:{},partials:_.isObject(d)?d:{},html:(_.isString(b)?b:"").replace(/<javascript/gi,'<script type="text/javascript"').replace(/<\/javascript>/gi,"</script>")};return Mustache.parse(e.html),cache_templates[a]=e,add_counter++,module.options.partials&&(cache_partials=_.object(_.keys(cache_templates),_.pluck(cache_templates,"html"))),e},module.get=function(id){if(module.has(id))return cache_templates[id];var template_name=cylinder.s.replaceAll(id,"/","_"),$template=cylinder.$("#template_"+template_name);if($template.length>0){var d={};try{d=eval("("+$template.attr("data-defaults")+")")}catch(a){}var template=module.add(id,cylinder.s.trim($template.html()),d);return $template.remove(),template}return null},module.load=function(){var a=cylinder.$.Deferred(),b=_.chain(arguments).flatten().filter(function(a){return _.isString(a)&&!cylinder.s.isBlank(a)}).value();if(b.length>1)return async.each(b,function(a,b){module.load(a).done(function(a){b(null,a)}).fail(function(a){b(a)})},function(b,c){b?a.reject(b):a.resolve()}),a;var c=_.first(b),d=_.last(arguments);if(_.isObject(d)||(d=null),_.has(load_errored,c))return a.reject(load_errored[c]),a;if(_.has(load_jobs,c))return load_jobs[c].promises.push(a),a;var e=module.get(c);if(!_.isEmpty(e)&&null===d)return a.resolve(e),a;var f=module.options.load_base_path;cylinder.s.endsWith(f,"/")||(f+="/");var g=c,h=g.split("/"),i=_.last(h);cylinder.s.include(i,module.options.load_extension)||(g+=module.options.load_extension);var j={id:c,path:f+g,date:new Date,request:null,promises:[a]};return j.request=$.ajax(_.extend({},d||{},{url:j.path,cache:module.options.load_cache,dataType:"html",error:function(a,b,e){var f={jxhr:a,text:b,thrown:e,status:a.status};null===d&&(load_errored[c]=f,delete load_jobs[c]),_.each(j.promises,function(a){a.reject(f)})},success:function(a){delete load_jobs[c],e=module.add(c,a),_.each(j.promises,function(a){a.resolve(e)})}})),null===d&&(load_jobs[c]=j),a},module.render=function(a,b,c){var d=module.get(a)||{error:!0,html:'!! Template "'+a+'" not found !!'},e=Mustache.render(d.html,_.extend({},module.defaults,d.defaults,b),_.extend({},cache_partials,d.partials,c));if(module.options.fire_events&&!d.error){var f=a.split("/");cylinder.trigger("render",a,b,c),_.reduce(f,function(a,d){return a=cylinder.s.trim(a+"/"+d,"/"),cylinder.trigger("render:"+a,b,c),a},"")}return e},module.apply=function(a,b,c,d){var e=cylinder.$.Deferred();if(a=getElementFromVariable(a),null===a||0==a.length)throw new CylinderException("Trying to apply a template to an empty or unknown jQuery element.");var f=function(e){var f=cylinder.s.trim(b,"/"),g=f.split("/");_.reduceRight(g,function(f,g){return cylinder.trigger(e+":"+f,a,b,c,d),f=cylinder.s(f).replace(g,"").trim("/").value()},f),cylinder.trigger(e,a,b,c,d)};return module.options.fire_events&&f("beforeapply"),module.options.load?module.load(b).fail(function(a){e.reject(a)}).done(function(){detachAllChildrenFromElement(a),a.html(module.render(b,c,d)),e.resolve(a,b,c,d),module.options.fire_events&&f("apply")}):(detachAllChildrenFromElement(a),a.html(module.render(b,c,d)),e.resolve(a,b,c,d),module.options.fire_events&&f("apply")),e.promise()},module.replace=function(a,b,c){var d=cylinder.$.Deferred();if(a=getElementFromVariable(a),null===a||0==a.length)throw new CylinderException("Trying to replace contents on an empty or unknown jQuery element.");var e=function(d){cylinder.trigger(d,a,b,c)};module.options.fire_events&&e("beforereplace");var f="",g=a.data("template-id");!cl.s.isBlank(g)&&_.has(cache_replaced,g)?f=cache_replaced[g]:(g=""+(new Date).getTime()+replace_counter,a.data("template-id",g),f=cylinder.s.unescapeHTML(a.html()),cache_replaced[g]=f,replace_counter++);var h=Mustache.render(f,_.extend({},module.defaults,b),_.extend({},cache_partials,c));return detachAllChildrenFromElement(a),a.html(h),d.resolve(a,b,c),module.options.fire_events&&e("replace"),d.promise()},module.options.premades!==!1){var variable=_.isString(module.options.premades)?module.options.premades:"JST";_.each(_.isObject(window[variable])?window[variable]:{},function(a,b){module.add(b,_.isFunction(a)?a():a)})}return module}},{}],13:[function(a,b,c){"use strict";b.exports=function(a,b){var c=_.extend({},b);return c.text=function(b){return a.$("<div>").html(b).text()},c.unserialize=function(a){for(var b,c,d=decodeURI(a),e=d.split("&"),f=/\+/g,g={},h=0,i=e.length;h<i;h++)b=e[h].split("="),c=b[0],void 0===g[c]?g[c]=decodeURIComponent(b[1]).replace(f," "):("string"==typeof g[c]&&(g[c]=[g[c]]),g[c].push(decodeURIComponent(b[1]).replace(f," ")));return g},c.query=function(a,b){var d=b||window.location.search.substring(1),e=c.unserialize(d);return _.has(e,a)?e[a]:null},c}},{}]},{},[5]);
//# sourceMappingURL=cylinder.min.js.map